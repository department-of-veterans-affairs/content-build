{% comment %}
    Example data:
    entity: {
        "entityId": "3944",
        "fieldTable": {
            "tableValue": "Row 1 Column 1 Row 1 Column 2 Row 1 Column 3 Row 2 Column 1 Row 2 Column 2 Row 2 Column 3 Row 3 Column 1 Row 3 Column 2 Row 3 Column 3",
            "value": {
                "0": [
                "Row 1 Column 1",
                "Row 1 Column 2",
                "Row 1 Column 3"
                ],
                "1": [
                "Row 2 Column 1",
                "Row 2 Column 2",
                "Row 2 Column 3"
                ],
                "2": [
                "Row 3 Column 1",
                "Row 3 Column 2",
                "Row 3 Column 3"
                ],
            }
            "format": "rich_text",
            "caption": "Test Table"
        }
    }
{% endcomment %}

<va-table data-template="paragraphs/table" data-entity-id="{{ entity.entityId }}" role="table">
        {% if entity.fieldTable.caption %}
            <caption>{{ entity.fieldTable.caption }}</caption>
        {% endif %}
        {% assign colLabels = entity.fieldTable.value.0  %}
        {% for value in entity.fieldTable.value %}
            {% if forloop.first == true %}
                <va-table-row slot="headers" key="header">
                    {% for column in value %}
                        <span role="columnheader" scope="col">{{ column }}</span>
                    {% endfor %}
                </va-table-row>
            {% else %}
                    <va-table-row class="vads-u-padding-top--5" role="row">
                        {% for column in value %}
                            {% if forloop.first == true %}
                                <span 
                                    class="vads-u-padding-bottom--0 column-label vads-u-font-weight--bold medium-screen:vads-u-display--none" role="rowheader" scope="row"
                                >
                                    <dfn> {{colLabels | getValueFromObjPath: forloop.index0}}      </dfn>
                                </span>
                                <span class="column-value table-row-header-responsive"  role="rowheader" scope="row">
                                    <dfn class="vads-u-display--block"> {{ column }} </dfn>
                                </span>
                            {% else %}
                                <span class="vads-u-padding-bottom--0 column-label vads-u-font-weight--bold medium-screen:vads-u-display--none" role="cell">
                                    <dfn> {{colLabels | getValueFromObjPath: forloop.index0}}      </dfn>
                                </span>
                                <span class="column-value"  role="cell">
                                    <dfn class="vads-u-display--block"> {{ column }}  </dfn>
                                </span>
                            {% endif %}
                        {% endfor %}
                    </va-table-row>
            {% endif %}
        {% endfor %}
</va-table>
